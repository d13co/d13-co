<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Benchmarking Algorand AMM 1:1 real world swap performance | D13.co</title>
<meta name=keywords content><meta name=description content='TL; DR: We tested Algorand with end-user-identical AMM swaps: 8,070 in a 3 second block.

Our friends at
Vestige.fi
recently performed a benchmark of AMM swap performance on Algorand
MainNet. While the results were great (2881 peak swaps per second), some
naysayers missed the forest for the trees with complaints about the
methodology being synthetic.
The
methodology
by the Vestige team was:

"We sent 353 groups of 85 swaps totaling 90368 transactions / 30005
AMM swaps. Algorand therefore handled 30005 AMM swaps in ~15 sec,
or about 2000 swaps/s. If we discount the last ~500 swaps in the
806 block we instead get 29500/11 sec = 2680 swaps. If someone
smarter than me has data on block times we could do better
calculations, in case blocks were delayed or so. "
"all transactions were made from
https://allo.info/address/SWAPVMWRFIIY2L5V2JEWXIE7TLSOCUJP4BJYMAM65VBMRXHHE24GBMMPYM
which called the app 1000469889 which does 85 swaps in inner
transactions (255/3)"

On Algorand, inner transactions are transactions initiated by a smart
contract. As such, they don&#39;t need to come with a signature attached -
the outer transaction call&#39;s signature suffices.'><meta name=author content="Bit @ D13.co"><link rel=canonical href=https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/><link crossorigin=anonymous href=/assets/css/stylesheet.4d47a558fed7688229f8bb73344ccfcd4003dac666a96a34cc665d38ad5f6ec8.css integrity="sha256-TUelWP7XaIIp+LtzNEzPzUAD2sZmqWo0zGZdOK1fbsg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://d13.co/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Benchmarking Algorand AMM 1:1 real world swap performance"><meta property="og:description" content='TL; DR: We tested Algorand with end-user-identical AMM swaps: 8,070 in a 3 second block.

Our friends at
Vestige.fi
recently performed a benchmark of AMM swap performance on Algorand
MainNet. While the results were great (2881 peak swaps per second), some
naysayers missed the forest for the trees with complaints about the
methodology being synthetic.
The
methodology
by the Vestige team was:

"We sent 353 groups of 85 swaps totaling 90368 transactions / 30005
AMM swaps. Algorand therefore handled 30005 AMM swaps in ~15 sec,
or about 2000 swaps/s. If we discount the last ~500 swaps in the
806 block we instead get 29500/11 sec = 2680 swaps. If someone
smarter than me has data on block times we could do better
calculations, in case blocks were delayed or so. "
"all transactions were made from
https://allo.info/address/SWAPVMWRFIIY2L5V2JEWXIE7TLSOCUJP4BJYMAM65VBMRXHHE24GBMMPYM
which called the app 1000469889 which does 85 swaps in inner
transactions (255/3)"

On Algorand, inner transactions are transactions initiated by a smart
contract. As such, they don&#39;t need to come with a signature attached -
the outer transaction call&#39;s signature suffices.'><meta property="og:type" content="article"><meta property="og:url" content="https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/"><meta property="og:image" content="https://d13.co/1673476543.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-11T02:18:38+00:00"><meta property="article:modified_time" content="2023-01-11T02:18:38+00:00"><meta property="og:site_name" content="D13.co"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://d13.co/1673476543.png"><meta name=twitter:title content="Benchmarking Algorand AMM 1:1 real world swap performance"><meta name=twitter:description content='TL; DR: We tested Algorand with end-user-identical AMM swaps: 8,070 in a 3 second block.

Our friends at
Vestige.fi
recently performed a benchmark of AMM swap performance on Algorand
MainNet. While the results were great (2881 peak swaps per second), some
naysayers missed the forest for the trees with complaints about the
methodology being synthetic.
The
methodology
by the Vestige team was:

"We sent 353 groups of 85 swaps totaling 90368 transactions / 30005
AMM swaps. Algorand therefore handled 30005 AMM swaps in ~15 sec,
or about 2000 swaps/s. If we discount the last ~500 swaps in the
806 block we instead get 29500/11 sec = 2680 swaps. If someone
smarter than me has data on block times we could do better
calculations, in case blocks were delayed or so. "
"all transactions were made from
https://allo.info/address/SWAPVMWRFIIY2L5V2JEWXIE7TLSOCUJP4BJYMAM65VBMRXHHE24GBMMPYM
which called the app 1000469889 which does 85 swaps in inner
transactions (255/3)"

On Algorand, inner transactions are transactions initiated by a smart
contract. As such, they don&#39;t need to come with a signature attached -
the outer transaction call&#39;s signature suffices.'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://d13.co/posts/"},{"@type":"ListItem","position":2,"name":"Benchmarking Algorand AMM 1:1 real world swap performance","item":"https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Benchmarking Algorand AMM 1:1 real world swap performance","name":"Benchmarking Algorand AMM 1:1 real world swap performance","description":"TL; DR: We tested Algorand with end-user-identical AMM swaps: 8,070 in a 3 second block.\nOur friends at Vestige.fi recently performed a benchmark of AMM swap performance on Algorand MainNet. While the results were great (2881 peak swaps per second), some naysayers missed the forest for the trees with complaints about the methodology being synthetic.\nThe methodology by the Vestige team was:\n\u0026quot;We sent 353 groups of 85 swaps totaling 90368 transactions / 30005 AMM swaps. Algorand therefore handled 30005 AMM swaps in ~15 sec, or about 2000 swaps/s. If we discount the last ~500 swaps in the 806 block we instead get 29500/11 sec = 2680 swaps. If someone smarter than me has data on block times we could do better calculations, in case blocks were delayed or so. \u0026quot; \u0026quot;all transactions were made from https://allo.info/address/SWAPVMWRFIIY2L5V2JEWXIE7TLSOCUJP4BJYMAM65VBMRXHHE24GBMMPYM which called the app 1000469889 which does 85 swaps in inner transactions (255/3)\u0026quot; On Algorand, inner transactions are transactions initiated by a smart contract. As such, they don't need to come with a signature attached - the outer transaction call's signature suffices.\n","keywords":[],"articleBody":"TL; DR: We tested Algorand with end-user-identical AMM swaps: 8,070 in a 3 second block.\nOur friends at Vestige.fi recently performed a benchmark of AMM swap performance on Algorand MainNet. While the results were great (2881 peak swaps per second), some naysayers missed the forest for the trees with complaints about the methodology being synthetic.\nThe methodology by the Vestige team was:\n\"We sent 353 groups of 85 swaps totaling 90368 transactions / 30005 AMM swaps. Algorand therefore handled 30005 AMM swaps in ~15 sec, or about 2000 swaps/s. If we discount the last ~500 swaps in the 806 block we instead get 29500/11 sec = 2680 swaps. If someone smarter than me has data on block times we could do better calculations, in case blocks were delayed or so. \" \"all transactions were made from https://allo.info/address/SWAPVMWRFIIY2L5V2JEWXIE7TLSOCUJP4BJYMAM65VBMRXHHE24GBMMPYM which called the app 1000469889 which does 85 swaps in inner transactions (255/3)\" On Algorand, inner transactions are transactions initiated by a smart contract. As such, they don't need to come with a signature attached - the outer transaction call's signature suffices.\nAlgorand's performance is limited by the current maximum block size of about 5 MB. Real user swaps would have 2x outer transactions along with their signatures, so we would expect the performance to still be in the thousands of swaps per second, but still a bit less than the absolute ceiling set by the inner transaction tests by Vestige.\nReal-User AMM swaps We set out to recreate the test but using the exact structure of real world AMM swaps.\nAs with swaps initiated via the frontend on Pact.fi, each swap consisted of two outer transactions in a group:\n1x payment to the contract address 1x application call to the contract to swap Methodology We used the Pact.fi Javascript SDK to sign 16,000 swaps with a first-last-round validity of 4 rounds. What we realized in earlier tests was that we would have more trouble sending these transactions through our nodes fast enough, than Algorand would have to process them.\nIn order to send these, we signed the 32,000 transactions ahead of time and copied them as files to 4 algod nodes - 2 archival medium-power nodes, and 2 very weak light nodes. A simple \"wait for status after\" script was used as the racegun to start sending them with goal clerk rawsend -f swaps at round 26196666.\nIn order to improve our odds and send rate, we generated the transaction files twice, once in normal order and once in reverse, and divided our nodes into sending them forwards and backwards at the same time. For best results we could have split into 4 groups.\nOur nodes were still not fast enough to broadcast all these in time - we got 15489 / 16000 sent. Our nodes were still trying to broadcast transactions at round 26196682 - 13 rounds and ~48 seconds after the transactions were no longer valid, so a single queue would not have been fast enough.\n💡\rWorth noting that these are benchmarking woes, not real-world woes: Real-world algod infrastructure like algonode.io is distributed around the world, so 16,000 real users wanting to swap at the exact same second would not have to push through our 4 puny nodes.\rResults Due to our lag in sending the transactions, the swaps were processed over 3 blocks:\nround txn counter (tc) timestamp (ts) ts diff tc diff amm swaps spot swaps/s others’ txns 26196665 1008497390 1673472332 26196666 1008497419 1673472335 3 29 26196667 1008511628 1673472339 4 14209 4725 1181.25 34 26196668 1008519717 1673472346 7 8089 2694 384.8571429 7 26196669 1008543974 1673472349 3 24257 8070 2690 47 26196670 1008544017 1673472355 6 43 26196671 1008544047 1673472359 4 30 26196672 1008544064 1673472362 3 17 You can find this data in Appendix A.\nThe last - and heaviest - block, weighing in at 5.018 MB, processed 8070 AMM swaps with a 3 second timestamp difference from the previous block.\nThe \"spot\" swaps per second performance for block 26196669 was 2690 swaps/second.\n(Since the timestamps have second-level granularity and round up milliseconds, the worst case time of 3.49 seconds works out to 2312 swaps/second; best case at 2.5 seconds would be 3228 swaps/second.)\nCounting from when we started sending them at round 26196666 until the last valid round of 26196669, Algorand had finalized 15,489 AMM swaps in 14 seconds, with an average of over 1100 swaps per second. Based on what we saw on our nodes' end, the bottleneck was sending each individual transaction over our nodes, as opposed to the network processing them.\nThe data includes a few rounds before and after our test as a measure of the impact to the network with regards to block timing: it was negligible. During the test, one block test has a 7 second timestamp difference compared to the average of 3-4 seconds, and then it was back to clockwork.\nAlgoExplorer screenshot of the busy blocks But can it sustain TPS? ... Yes. A valid question would be how long Algorand can sustain a high rate of transactions. For our project TheBillBored.com we did 1,066,803 transactions in 213 seconds (average 5008.46 TPS) in order to \"snipe\" Asset ID One Billion. We intentionally didn't even use up 100% of the network's capacity! Story here.\nBlock 25990194 start transaction counter: 998,933,246 Block 25990245 end transaction counter: 1,000,000,049 Transactions: 1,066,803 Seconds elapsed: 213 Average TPS: 5008.46 Conclusion If you can send them fast enough (we barely could) Algorand will happily process thousands of real world AMM swaps per second, with a peak in the high two thousands - much like the test results from our friends at Vestige.fi.\nIn case you weren't paying attention earlier, this test had the exact transaction structures that real users would perform at Pact.fi, so it'll be a lot harder to hand-wave away.\nAppendix A - D13 test data Aggregate data available on Google Sheets.\nSee the transactions: BENCHMAKER.. on AlgoExplorer.\nAppendix B - Vestige test blocks \u0026 transaction count: 26418: https://allo.info/block/26101803\n31250: https://allo.info/block/26101804\n31241: https://allo.info/block/26101805\n1567: https://allo.info/block/26101806\nSource\n","wordCount":"1001","inLanguage":"en","image":"https://d13.co/1673476543.png","datePublished":"2023-01-11T02:18:38Z","dateModified":"2023-01-11T02:18:38Z","author":{"@type":"Person","name":"Bit @ D13.co"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/"},"publisher":{"@type":"Organization","name":"D13.co","logo":{"@type":"ImageObject","url":"https://d13.co/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://d13.co/ accesskey=h title="  (Alt + H)"><img src=https://d13.co/images/logo-7-green-128.png alt=logo aria-label=logo height=48></a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://d13.co/>Home</a>&nbsp;»&nbsp;<a href=https://d13.co/posts/>Posts</a></div><h1 class=post-title>Benchmarking Algorand AMM 1:1 real world swap performance</h1><div class=post-meta>&lt;span title='2023-01-11 02:18:38 +0000 +0000'>January 11, 2023&lt;/span>&amp;nbsp;·&amp;nbsp;5 min&amp;nbsp;·&amp;nbsp;1001 words&amp;nbsp;·&amp;nbsp;Bit @ D13.co&nbsp;|&nbsp;<a href=https://github.com/d13co/d13.co/tree/main/content/posts/benchmarking-algorand-amm-real-user-swap-performance/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy srcset="https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/1673476543_hu13905517145067728164.png 360w ,https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/1673476543_hu15766997417697936908.png 480w ,https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/1673476543_hu10968334017749296069.png 720w ,https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/1673476543.png 861w" sizes="(min-width: 768px) 720px, 100vw" src=https://d13.co/benchmarking-algorand-amm-real-user-swap-performance/1673476543.png alt width=861 height=349></figure><div class=post-content><p>TL; DR: We tested Algorand with end-user-identical AMM swaps: 8,070 in a 3 second block.</p><hr><p>Our friends at
<a href=https://vestige.fi/>Vestige.fi</a>
recently performed a benchmark of AMM swap performance on Algorand
MainNet. While the results were great (2881 peak swaps per second), some
naysayers missed the forest for the trees with complaints about the
methodology being synthetic.</p><p>The
<a href=https://discord.com/channels/491256308461207573/491256308461207575/1061347210060644413>methodology</a>
by the Vestige team was:</p><ul><li>"We sent 353 groups of 85 swaps totaling 90368 transactions / 30005
AMM swaps. Algorand therefore handled 30005 AMM swaps in ~15 sec,
or about 2000 swaps/s. If we discount the last ~500 swaps in the
806 block we instead get 29500/11 sec = 2680 swaps. If someone
smarter than me has data on block times we could do better
calculations, in case blocks were delayed or so. "</li><li>"all transactions were made from
<a href=https://allo.info/address/SWAPVMWRFIIY2L5V2JEWXIE7TLSOCUJP4BJYMAM65VBMRXHHE24GBMMPYM>https://allo.info/address/SWAPVMWRFIIY2L5V2JEWXIE7TLSOCUJP4BJYMAM65VBMRXHHE24GBMMPYM</a>
which called the app 1000469889 which does 85 swaps in inner
transactions (255/3)"</li></ul><p>On Algorand, inner transactions are transactions initiated by a smart
contract. As such, they don't need to come with a signature attached -
the outer transaction call's signature suffices.</p><p>Algorand's performance is limited by the current maximum block size of
about 5 MB. Real user swaps would have 2x outer transactions along with
their signatures, so we would expect the performance to still be in the
thousands of swaps per second, but still a bit less than the absolute
ceiling set by the inner transaction tests by Vestige.</p><h2 id=real-user-amm-swaps>Real-User AMM swaps<a hidden class=anchor aria-hidden=true href=#real-user-amm-swaps>#</a></h2><p>We set out to recreate the test but using the exact structure of real
world AMM swaps.</p><p>As with swaps initiated via the frontend on
<a href=https://app.pact.fi/>Pact.fi</a>,
each swap consisted of two outer transactions in a group:</p><ul><li>1x payment to the contract address</li><li>1x application call to the contract to swap</li></ul><h2 id=methodology>Methodology<a hidden class=anchor aria-hidden=true href=#methodology>#</a></h2><p>We used the Pact.fi Javascript SDK to sign 16,000 swaps with a
first-last-round validity of 4 rounds. What we realized in earlier tests
was that we would have more trouble sending these transactions through
our nodes fast enough, than Algorand would have to process them.</p><p>In order to send these, we signed the 32,000 transactions ahead of time
and copied them as files to 4 algod nodes - 2 archival medium-power
nodes, and 2 very weak light nodes. A simple "wait for status after"
script was used as the racegun to start sending them with
<code>goal clerk rawsend -f swaps</code> at round 26196666.</p><p>In order to improve our odds and send rate, we generated the transaction
files twice, once in normal order and once in reverse, and divided our
nodes into sending them forwards and backwards at the same time. For
best results we could have split into 4 groups.</p><p>Our nodes were still not fast enough to broadcast all these in time - we
got 15489 / 16000 sent. Our nodes were still trying to broadcast
transactions at round 26196682 - 13 rounds and ~48 seconds after the
transactions were no longer valid, so a single queue would not have been
fast enough.</p><style>#callout{background:rgba(127,127,127,.2);padding:1.5em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin-bottom:20px}#callout-inner{margin-left:1em}@media(max-width:767px){#callout{padding:1.5em .75em 1.5em .6em}#callout-inner{margin-left:.5em}}</style><div id=callout><div>💡</div><div id=callout-inner>Worth noting that these are benchmarking woes, not real-world woes: Real-world <code>algod</code> infrastructure like <a href=https://algonode.io/>algonode.io</a> is distributed around the world, so 16,000 real users wanting to swap at the exact same second would not have to push through our 4 puny nodes.</div></div><h2 id=results>Results<a hidden class=anchor aria-hidden=true href=#results>#</a></h2><p>Due to our lag in sending the transactions, the swaps were processed
over 3 blocks:</p><table><thead><tr><th style=text-align:left>round</th><th style=text-align:left>txn counter (tc)</th><th style=text-align:left>timestamp (ts)</th><th style=text-align:left>ts diff</th><th style=text-align:left>tc diff</th><th style=text-align:left>amm swaps</th><th style=text-align:left>spot swaps/s</th><th style=text-align:left>others’ txns</th></tr></thead><tbody><tr><td style=text-align:left>26196665</td><td style=text-align:left>1008497390</td><td style=text-align:left>1673472332</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>26196666</td><td style=text-align:left>1008497419</td><td style=text-align:left>1673472335</td><td style=text-align:left>3</td><td style=text-align:left>29</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>26196667</td><td style=text-align:left>1008511628</td><td style=text-align:left>1673472339</td><td style=text-align:left>4</td><td style=text-align:left>14209</td><td style=text-align:left>4725</td><td style=text-align:left>1181.25</td><td style=text-align:left>34</td></tr><tr><td style=text-align:left>26196668</td><td style=text-align:left>1008519717</td><td style=text-align:left>1673472346</td><td style=text-align:left>7</td><td style=text-align:left>8089</td><td style=text-align:left>2694</td><td style=text-align:left>384.8571429</td><td style=text-align:left>7</td></tr><tr><td style=text-align:left>26196669</td><td style=text-align:left>1008543974</td><td style=text-align:left>1673472349</td><td style=text-align:left>3</td><td style=text-align:left>24257</td><td style=text-align:left>8070</td><td style=text-align:left>2690</td><td style=text-align:left>47</td></tr><tr><td style=text-align:left>26196670</td><td style=text-align:left>1008544017</td><td style=text-align:left>1673472355</td><td style=text-align:left>6</td><td style=text-align:left>43</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>26196671</td><td style=text-align:left>1008544047</td><td style=text-align:left>1673472359</td><td style=text-align:left>4</td><td style=text-align:left>30</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr><tr><td style=text-align:left>26196672</td><td style=text-align:left>1008544064</td><td style=text-align:left>1673472362</td><td style=text-align:left>3</td><td style=text-align:left>17</td><td style=text-align:left></td><td style=text-align:left></td><td style=text-align:left></td></tr></tbody></table><p><em>You can find this data in Appendix A.</em></p><p>The last - and heaviest - block, weighing in at 5.018 MB, processed 8070
AMM swaps with a 3 second timestamp difference from the previous block.</p><p><strong>The "spot" swaps per second performance for block 26196669 was 2690
swaps/second.</strong></p><p>(Since the timestamps have second-level granularity and round up
milliseconds, the worst case time of 3.49 seconds works out to 2312
swaps/second; best case at 2.5 seconds would be 3228 swaps/second.)</p><p>Counting from when we started sending them at round 26196666 until the
last valid round of 26196669, Algorand had finalized 15,489 AMM swaps in
14 seconds, with an average of over 1100 swaps per second. Based on what
we saw on our nodes' end, the bottleneck was sending each individual
transaction over our nodes, as opposed to the network processing them.</p><p>The data includes a few rounds before and after our test as a measure of
the impact to the network with regards to block timing: it was
negligible. During the test, one block test has a 7 second timestamp
difference compared to the average of 3-4 seconds, and then it was back
to clockwork.</p><figure><img loading=lazy src=1673473191.png><figcaption>AlgoExplorer screenshot of the busy blocks</figcaption></figure><h2 id=but-can-it-sustain-tps-yes>But can it sustain TPS? ... Yes.<a hidden class=anchor aria-hidden=true href=#but-can-it-sustain-tps-yes>#</a></h2><p>A valid question would be how long Algorand can sustain a high rate of
transactions. For our project
<a href=https://thebillbored.com/>TheBillBored.com</a>
we did 1,066,803 transactions in 213 seconds (average 5008.46 TPS) in
order to "snipe" Asset ID One Billion. We intentionally didn't even
use up 100% of the network's capacity! <a href=https://twitter.com/TheBillBored/status/1610360365384142851>Story
here</a>.</p><pre tabindex=0><code>Block 25990194 start transaction counter: 998,933,246
Block 25990245 end transaction counter: 1,000,000,049
Transactions: 1,066,803
Seconds elapsed: 213
Average TPS: 5008.46
</code></pre><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>If you can send them fast enough (we barely could) Algorand will happily
process <strong>thousands of</strong> <strong>real world AMM swaps per second</strong>, with a
peak in the high two thousands - much like the test results from our
friends at
<a href=https://vestige.fi/>Vestige.fi</a>.</p><p>In case you weren't paying attention earlier, this test had the <strong>exact
transaction structures that real users would perform</strong> at
<a href=https://pact.fi/>Pact.fi</a>,
so it'll be a lot harder to hand-wave away.</p><h2 id=appendix-a---d13-test-data>Appendix A - D13 test data<a hidden class=anchor aria-hidden=true href=#appendix-a---d13-test-data>#</a></h2><p>Aggregate data available on <a href=https://docs.google.com/spreadsheets/d/1DPDzZNIre3hGuBhC28VIE-JT3vVZn_vpFb0y8vdV-SI/>Google
Sheets</a>.</p><p>See the transactions: <a href=https://allo.info/address/BENCHMAKERWFHU3YPNJIXT6F7JIDWJJQF46KW4P4WGXUX7ELTPM6JTUZ2A>BENCHMAKER.. on
AlgoExplorer</a>.</p><h2 id=appendix-bvestige-test-blocks-transaction-count>Appendix B - Vestige test blocks & transaction count:<a hidden class=anchor aria-hidden=true href=#appendix-bvestige-test-blocks-transaction-count>#</a></h2><p>26418:
<a href=https://allo.info/block/26101803>https://allo.info/block/26101803</a></p><p>31250:
<a href=https://allo.info/block/26101804>https://allo.info/block/26101804</a></p><p>31241:
<a href=https://allo.info/block/26101805>https://allo.info/block/26101805</a></p><p>1567:
<a href=https://allo.info/block/26101806>https://allo.info/block/26101806</a></p><p><a href=https://discord.com/channels/491256308461207573/491256308461207575/1061347210060644413>Source</a></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://d13.co/algorand-20-02-2023-thefts-preliminary-advisory-report/><span class=title>« Prev</span><br><span>Preliminary Advisory Report - Algorand 20-02-2023 Thefts</span>
</a><a class=next href=https://d13.co/set-up-algorand-participation-node-on-oracle-cloud-free/><span class=title>Next »</span><br><span>Setting up an Algorand consensus participation server on Oracle Cloud for free</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Benchmarking Algorand AMM 1:1 real world swap performance on twitter" href="https://twitter.com/intent/tweet/?text=Benchmarking%20Algorand%20AMM%201%3a1%20real%20world%20swap%20performance&amp;url=https%3a%2f%2fd13.co%2fbenchmarking-algorand-amm-real-user-swap-performance%2f&amp;hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Benchmarking Algorand AMM 1:1 real world swap performance on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fd13.co%2fbenchmarking-algorand-amm-real-user-swap-performance%2f&amp;title=Benchmarking%20Algorand%20AMM%201%3a1%20real%20world%20swap%20performance&amp;summary=Benchmarking%20Algorand%20AMM%201%3a1%20real%20world%20swap%20performance&amp;source=https%3a%2f%2fd13.co%2fbenchmarking-algorand-amm-real-user-swap-performance%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Benchmarking Algorand AMM 1:1 real world swap performance on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fd13.co%2fbenchmarking-algorand-amm-real-user-swap-performance%2f&title=Benchmarking%20Algorand%20AMM%201%3a1%20real%20world%20swap%20performance"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Benchmarking Algorand AMM 1:1 real world swap performance on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fd13.co%2fbenchmarking-algorand-amm-real-user-swap-performance%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Benchmarking Algorand AMM 1:1 real world swap performance on whatsapp" href="https://api.whatsapp.com/send?text=Benchmarking%20Algorand%20AMM%201%3a1%20real%20world%20swap%20performance%20-%20https%3a%2f%2fd13.co%2fbenchmarking-algorand-amm-real-user-swap-performance%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Benchmarking Algorand AMM 1:1 real world swap performance on telegram" href="https://telegram.me/share/url?text=Benchmarking%20Algorand%20AMM%201%3a1%20real%20world%20swap%20performance&amp;url=https%3a%2f%2fd13.co%2fbenchmarking-algorand-amm-real-user-swap-performance%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://d13.co/>D13.co</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>